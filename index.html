<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Year Progress Calculator</title>
    <style>
        body {
            background-color: transparent; /* Makes the background transparent for iframe embedding */
            margin: 0; /* Removes default margin */
        }
        .container {
            font-family: Arial, sans-serif;
            text-align: center;
            margin: 50px;
        }
        select, input, button {
            padding: 10px;
            margin: 10px;
        }
        canvas {
            margin-top: 20px;
        }
    </style>
</head>
<body>
    <div class="container">
        <label for="monthInput">Choose Month:</label>
        <select id="monthInput">
            <option value="1">January</option>
            <option value="2">February</option>
            <option value="3">March</option>
            <option value="4">April</option>
            <option value="5">May</option>
            <option value="6">June</option>
            <option value="7">July</option>
            <option value="8">August</option>
            <option value="9">September</option>
            <option value="10">October</option>
            <option value="11">November</option>
            <option value="12">December</option>
        </select>

        <label for="dayInput">Choose Day:</label>
        <input type="number" id="dayInput" min="1" max="31">

        <label for="leapYearInput">Is it a leap year?</label>
        <input type="checkbox" id="leapYearInput">

        <button onclick="calculateProgress()">Calculate</button>
        <p id="result"></p>

        <!-- Pie Chart -->
        <canvas id="yearProgressChart" width="200" height="200"></canvas>

        <script>
            window.onload = function() {
                const now = new Date();
                const currentMonth = now.getMonth() + 1;
                const currentDay = now.getDate();
                const currentYear = now.getFullYear();

                document.getElementById("monthInput").value = currentMonth;
                document.getElementById("dayInput").value = currentDay;

                const isLeap = (currentYear % 4 === 0 && currentYear % 100 !== 0) || (currentYear % 400 === 0);
                document.getElementById("leapYearInput").checked = isLeap;

                calculateProgress(); // Run on load with today’s date
            };

            function calculateProgress() {
                const monthInput = parseInt(document.getElementById("monthInput").value);
                const dayInput = parseInt(document.getElementById("dayInput").value);
                const isLeap = document.getElementById("leapYearInput").checked;
                const now = new Date();
                const year = now.getFullYear();
                const daysInMonth = [31, (isLeap ? 29 : 28), 31, 30, 31, 30, 31, 31, 30, 31, 30, 31];
                
                if (dayInput < 1 || dayInput > daysInMonth[monthInput - 1]) {
                    document.getElementById("result").innerText = "Please enter a valid day for the selected month.";
                    return;
                }

                let dayOfYear = 0;
                for (let i = 0; i < monthInput - 1; i++) {
                    dayOfYear += daysInMonth[i];
                }
                dayOfYear += dayInput;

                const totalDays = isLeap ? 366 : 365;
                const percentPassed = (dayOfYear / totalDays) * 100;
                const degreesPassed = (percentPassed / 100) * 360;

                document.getElementById("result").innerHTML = `On ${monthInput}/${dayInput} (Day ${dayOfYear} of the year), approximately ${percentPassed.toFixed(6)}% of the year has passed.<br>This is equivalent to about ${degreesPassed.toFixed(2)}° in a 360-degree circle.`;

                drawPieChart(percentPassed);
            }

            function drawPieChart(percent) {
                const canvas = document.getElementById("yearProgressChart");
                const ctx = canvas.getContext("2d");
                const centerX = canvas.width / 2;
                const centerY = canvas.height / 2;
                const radius = 80;

                ctx.clearRect(0, 0, canvas.width, canvas.height);

                // Draw the background circle (remaining part of the year)
                ctx.beginPath();
                ctx.arc(centerX, centerY, radius, 0, 2 * Math.PI);
                ctx.fillStyle = "#ddd"; // Light gray for unused year
                ctx.fill();

                // Draw the progress arc
                const endAngle = (percent / 100) * 2 * Math.PI;
                ctx.beginPath();
                ctx.moveTo(centerX, centerY);
                ctx.arc(centerX, centerY, radius, -Math.PI / 2, endAngle - Math.PI / 2, false);
                ctx.lineTo(centerX, centerY);
                ctx.fillStyle = "#4CAF50"; // Green for completed portion
                ctx.fill();
            }
        </script>
    </div>
</body>
</html>
